{% extends "base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}


{% block styles %}
  {{super()}}

  <style type="text/css">
    th {
     /* border: 1px solid lightgray;
      padding: 0px 4px;*/
      text-align: center;
      /*vertical-align: middle;*/
    }
    .center { text-align: center; }
    .right { text-align: right; }
    .line-through {
      text-decoration: line-through;
    }
    .smallCell {
        width: 1px;
        white-space: nowrap;
    }
    .filter_w {
      max-width: 300px;
      float: left;
      margin-top: 3px;
      /*margin-left: 2px;*/
    }
  </style>

{% endblock %}




{% block app_content %}

  <div class="container">

  	<div class="row">
      <h2> {{ annual_session.name }} </h2>

      <div class="input-group filter_w"> 
        <span class="input-group-addon">Filter</span>
        <input id="filter" type="text" class="form-control" placeholder="Type here...">
      </div>

      <div style="margin: 3px; float: left">
      <a href="{{url_for('_fetch_data_annual_grade', annual_session_id=annual_session.id) }}" 
        class="btn btn-warning" role="button" >Fetch Data</a>

      {% set refrech_url = url_for('calculate_annual_session', annual_session_id=annual_session.id) %}
      <a href="{{url_for('slow_redirect', url=refrech_url) }}" class="btn btn-primary" role="button" >(Re)Calculate</a>

      <a href="{{url_for('students_rattrapage_annual', annual_session_id=annual_session.id)}}" class="btn btn-primary" role="button" >Show Ratt. List</a>

      {% set all_bultin_url = url_for('bultin_annual_print_all', annual_session_id=annual_session.id) %}
      <a href="{{ url_for('slow_redirect', url=all_bultin_url, message='Collecting...') }}" class="btn btn-success" role="button" target="_blank" >Print All Bultin</a>
      </div>

      </br> </br>

      <table id="myTable" class="table table-striped table-bordered ">
        <thead>
          <tr>
            <th rowspan="2">#</th>
            <th rowspan="2"><center>Name</center></th>
            <th colspan="2">
              {% if annual_dict['S1'] != -1 %}
                <a href="{{ url_for('session', session_id=annual_dict['S1']) }}" target="_blank" >Semester 1</a>
              {% else %}
                Semester 1
              {% endif %}
            </th>
            <th colspan="2">
              {% if annual_dict['S2'] != -1 %}
                <a href="{{ url_for('session', session_id=annual_dict['S2']) }}" target="_blank" >Semester 2</a>
              {% else %}
                Semester 2
              {% endif %}
            </th>
            <th colspan="2">Annual</th>
            <th rowspan="2">Ratt</th>

            <th colspan="2">
              {% if annual_dict['R1'] != -1 %}
                <a href="{{ url_for('session', session_id=annual_dict['R1']) }}" target="_blank" >Ratt. 1</a>
              {% else %}
                Ratt. 1
              {% endif %}
            </th>
            <th colspan="2">
              {% if annual_dict['R2'] != -1 %}
                <a href="{{ url_for('session', session_id=annual_dict['R2']) }}" target="_blank" >Ratt. 2</a>
              {% else %}
                Ratt. 2
              {% endif %}
            </th>
            <th colspan="2">Annual Ratt</th>
            <th colspan="2">Saving</th>
            <th colspan="2">Final</th>
            <th colspan="1" rowspan="2">Obs.</th>
            <th colspan="1" rowspan="2">Bultin</th>
          </tr>
          <tr>
            <th>A</th><th>C</th><th>A</th><th>C</th>

            <th>A</th><th>C</th><th>A</th><th>C</th>

            <th>A</th><th>C</th><th>A</th><th>C</th>

            <th>A</th><th>C</th><th>A</th><th>C</th>
            <!-- <th>Obs.</th> -->
          </tr>
        </thead>
        <tbody class="searchable">
        {% for data in array_data %}
          <tr>
          {% for td in data %}
            {{ td | safe | replace('None', '') }}
          {% endfor %}
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>

    <button class="btn btn-danger"
      data-href="{{url_for('delete_annual_session', annual_session_id=annual_session.id)}}" 
      data-toggle="modal" data-target="#confirm-delete">Delete Annual</button>
    <div class="modal fade" id="confirm-delete" tabindex="-1"
       role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <!--div class="modal-header">
              ...
          </div-->
          <div class="modal-body">
            do you really want to delete this Annual session?
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            <a class="btn btn-danger btn-ok">Delete</a>
          </div>
        </div>
      </div>
    </div>

  </br>
  </br>
  - navigate to the related sessions</br>
  - button to calculate annual & all sessions</br>
  - 
  - f</br>
       f</br>

  </br>
  </br>


  </div>


{% endblock %}






{% block scripts %}
  {{ super() }}

  <script type="text/javascript">
  
    {% include "_filter.js" %} 

    
    $('#confirm-delete').on('show.bs.modal', function(e) {
      $(this).find('.btn-ok').attr('href', $(e.relatedTarget).data('href'));
    });
  </script>

{% endblock %}




 